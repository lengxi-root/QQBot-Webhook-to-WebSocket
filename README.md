# Webhook to WebSocket Bridge Service

## 📝 项目简介
由于uvloop不支持Windows系统，本项目对原项目做了针对windows的兼容，主要有两个需要注意的：
1. 代码中配置SSL证书路径
2. 安装 "uvicorn[standard]" 包而不是 "uvicorn" 包

为提供QQBot的Webhook到WebSocket的实时消息转发能力，以ws将消息推送到客户端，支持消息缓存断线重传、高稳定并发等特性。
！！仅做桥接转换，不支持转换为onebot协议连接

## ✨ 主要特性

- 📦 **缓存重传**：自动缓存离线消息，重连后补发（5分钟）
- ⚖️ **负载均衡**：支持多个客户端同时接收相同消息
- 🔒 **双模式缓存**：同时支持公共缓存和Token私有缓存隔离  
- 📊 **沙盒模式**：沙盒环境支持群组/成员/内容消息过滤  
- ⏱ **速率控制**：补发时延迟与限速（3秒延迟启动 + 1秒/10条）  
- 🛡 **失败熔断**：连续5次发送失败自动断开异常连接  
- 📊 **实时监控**：挂载 /logs 页面实时监控状态
- ⚡ **高性能**：基于 FastAPI 的异步处理，支持高并发

## 🚀 快速开始

### 准备工作
- 公网IP服务器
- QQ机器人（测试用）
- 域名（接收Webhook推送）
- Python环境（推荐使用宝塔面板）

### 部署步骤

1. **配置域名与SSL**
   - 绑定域名
   - 开启外网映射（端口8443）
   - 申请Let's Encrypt证书(https://console.letsencrypt.top/)，申请后将证书下载下来(选择key/pem格式)

2. **部署站点**
   - 将SSL证书的绝对路径写入代码中
   - 运行程序

3. **配置QQ开放平台**
   - 事件通知地址：`https://{域名}:8443/webhook?secret={机器人密钥}`
   - 配置事件接收

4. **连接WebSocket**
   - 连接地址：`wss://{域名}:8443/ws/{机器人密钥}`
   - 推荐使用WSS安全连接

## 📝 关于 Issues

提交规范：
- 标题：简明描述问题
- 内容：复现步骤、期望结果、实际结果、截图、日志
- 标签：bug、enhancement、question等

## ✨ 关于 Pull Requests

提交规范：
- 代码需有详细注释
- 遵循项目编码规范
- 确保代码无语法/逻辑错误
- 通过测试验证

> 开发提供可直接使用提供的公共服务（无偿群号：1033218561）